{
    "sourceFile": "frontend/src/pages/Dashboard.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1749581969173,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1749581969173,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { analyticsApi, appointmentsApi } from '../services/api';\r\n\r\nconst Dashboard = () => {\r\n  const [stats, setStats] = useState({\r\n    patientCount: 0,\r\n    doctorCount: 0,\r\n    appointmentsToday: 0,\r\n    occupancyRate: 0\r\n  });\r\n  const [upcomingAppointments, setUpcomingAppointments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchDashboardData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        const [dashboardData, upcomingData] = await Promise.all([\r\n          analyticsApi.getDashboard(),\r\n          appointmentsApi.getUpcoming({ limit: 5 })\r\n        ]);\r\n        \r\n        if (dashboardData.success) {\r\n          setStats(dashboardData.data.stats);\r\n        }\r\n        \r\n        if (upcomingData.success) {\r\n          setUpcomingAppointments(upcomingData.data.upcomingAppointments);\r\n        }\r\n        \r\n        setError(null);\r\n      } catch (err) {\r\n        console.error('Error fetching dashboard data:', err);\r\n        setError('Failed to load dashboard data. Please try again later.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchDashboardData();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"text-2xl font-semibold text-gray-900\">Dashboard</h1>\r\n      \r\n      {error && (\r\n        <div className=\"bg-red-50 text-red-700 p-4 rounded-md my-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      {loading ? (\r\n        <div className=\"flex justify-center my-8\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* Stats cards */}\r\n          <div className=\"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\r\n            <div className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n              <div className=\"px-4 py-5 sm:p-6\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"flex-shrink-0 bg-blue-500 rounded-md p-3\">\r\n                    {/* User icon (simplified) */}\r\n                    <svg className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\r\n                    </svg>\r\n                  </div>\r\n                  <div className=\"ml-5 w-0 flex-1\">\r\n                    <dl>\r\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">Total Patients</dt>\r\n                      <dd>\r\n                        <div className=\"text-lg font-medium text-gray-900\">{stats.patientCount}</div>\r\n                      </dd>\r\n                    </dl>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-gray-50 px-4 py-4 sm:px-6\">\r\n                <div className=\"text-sm\">\r\n                  <Link to=\"/patients\" className=\"font-medium text-blue-600 hover:text-blue-500\">\r\n                    View all\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n              <div className=\"px-4 py-5 sm:p-6\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"flex-shrink-0 bg-green-500 rounded-md p-3\">\r\n                    {/* Doctor icon (simplified) */}\r\n                    <svg className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                    </svg>\r\n                  </div>\r\n                  <div className=\"ml-5 w-0 flex-1\">\r\n                    <dl>\r\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">Total Doctors</dt>\r\n                      <dd>\r\n                        <div className=\"text-lg font-medium text-gray-900\">{stats.doctorCount}</div>\r\n                      </dd>\r\n                    </dl>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-gray-50 px-4 py-4 sm:px-6\">\r\n                <div className=\"text-sm\">\r\n                  <Link to=\"/doctors\" className=\"font-medium text-blue-600 hover:text-blue-500\">\r\n                    View all\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n              <div className=\"px-4 py-5 sm:p-6\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"flex-shrink-0 bg-yellow-500 rounded-md p-3\">\r\n                    {/* Calendar icon (simplified) */}\r\n                    <svg className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                    </svg>\r\n                  </div>\r\n                  <div className=\"ml-5 w-0 flex-1\">\r\n                    <dl>\r\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">Today's Appointments</dt>\r\n                      <dd>\r\n                        <div className=\"text-lg font-medium text-gray-900\">{stats.appointmentsToday}</div>\r\n                      </dd>\r\n                    </dl>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-gray-50 px-4 py-4 sm:px-6\">\r\n                <div className=\"text-sm\">\r\n                  <Link to=\"/appointments\" className=\"font-medium text-blue-600 hover:text-blue-500\">\r\n                    View all\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n              <div className=\"px-4 py-5 sm:p-6\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"flex-shrink-0 bg-purple-500 rounded-md p-3\">\r\n                    {/* Bed icon (simplified) */}\r\n                    <svg className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\r\n                    </svg>\r\n                  </div>\r\n                  <div className=\"ml-5 w-0 flex-1\">\r\n                    <dl>\r\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">Ward Occupancy</dt>\r\n                      <dd>\r\n                        <div className=\"text-lg font-medium text-gray-900\">{stats.occupancyRate}%</div>\r\n                      </dd>\r\n                    </dl>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-gray-50 px-4 py-4 sm:px-6\">\r\n                <div className=\"text-sm\">\r\n                  <Link to=\"/wards\" className=\"font-medium text-blue-600 hover:text-blue-500\">\r\n                    View all\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Upcoming appointments */}\r\n          <div className=\"mt-8\">\r\n            <h2 className=\"text-lg font-medium text-gray-900\">Upcoming Appointments</h2>\r\n            \r\n            <div className=\"mt-4 bg-white shadow overflow-hidden sm:rounded-md\">\r\n              <ul className=\"divide-y divide-gray-200\">\r\n                {upcomingAppointments.length > 0 ? (\r\n                  upcomingAppointments.map((appointment) => (\r\n                    <li key={appointment.appointment_id}>\r\n                      <Link to={`/appointments/${appointment.appointment_id}`} className=\"block hover:bg-gray-50\">\r\n                        <div className=\"px-4 py-4 sm:px-6\">\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <div className=\"flex items-center\">\r\n                              <p className=\"text-sm font-medium text-blue-600 truncate\">\r\n                                {appointment.patient_first_name} {appointment.patient_last_name}\r\n                              </p>\r\n                              <p className=\"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\r\n                                Patient\r\n                              </p>\r\n                            </div>\r\n                            <div className=\"ml-2 flex-shrink-0 flex\">\r\n                              <p className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800\">\r\n                                {new Date(appointment.appointment_date).toLocaleString()}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"mt-2 flex justify-between\">\r\n                            <div className=\"sm:flex\">\r\n                              <p className=\"flex items-center text-sm text-gray-500\">\r\n                                Dr. {appointment.doctor_first_name} {appointment.doctor_last_name}\r\n                              </p>\r\n                              <p className=\"mt-2 flex items-center text-sm text-gray-500 sm:mt-0 sm:ml-6\">\r\n                                {appointment.specialization}\r\n                              </p>\r\n                            </div>\r\n                            <div className=\"flex items-center text-sm text-gray-500\">\r\n                              {Math.round(appointment.hours_until_appointment)} hours from now\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </Link>\r\n                    </li>\r\n                  ))\r\n                ) : (\r\n                  <li>\r\n                    <div className=\"px-4 py-4 sm:px-6 text-center text-gray-500\">\r\n                      No upcoming appointments\r\n                    </div>\r\n                  </li>\r\n                )}\r\n              </ul>\r\n              \r\n              <div className=\"bg-gray-50 px-4 py-3 text-right sm:px-6\">\r\n                <Link\r\n                  to=\"/appointments\"\r\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n                >\r\n                  View All Appointments\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"
        }
    ]
}